---
title: "Advanced_R_Ch8_Conditions"
author: "Soon-Chun Jeong"
date: "`r Sys.Date()`"
output: html_document
---
```{r}
#8.2.1. Write a wrapper around file.remove() that throws an error if the file to be deleted does not exist.
saveRDS(mtcars, "test.rds")
file.remove("test.rds")
file.remove("test.rds")
file.remove("test.rds", call.=FALSE)
# Is there any way to use stop or abort?
# 8.2.2. What does the appendLF argument to message() do? How is it related to cat()?
??appendLF
message("Hixxxxxxxxxxx", "yyyyyyyyyyy", appendLF = TRUE)
message("Hixxxxxxxxxx", "yyyyyyyy", appendLF = FALSE)
# newline appended, line breaks??

#8.4.1. What extra information does the condition generated by abort() contain compared to the condition generated by stop() i.e. whatâ€™s the difference between these two objects? Read the help for ?abort to learn more.
library(rlang)
catch_cnd(stop("An error"))
catch_cnd(abort("An error"))
# abort() stores the whole backtrace

#8.4.2. Predict the results of evaluating the following code
show_condition <- function(code) {
  tryCatch(
    error = function(cnd) "error",
    warning = function(cnd) "warning",
    message = function(cnd) "message",
    {
      code
      NULL
    }
  )
}


show_condition(stop("!"))
show_condition(10)
show_condition(warning("?!"))
show_condition({
  10
  message("?")
  warning("?!")
})

# I do not understand why 10 was used.
show_condition(9)


#8.4.3. Explain the results of running this code
withCallingHandlers(  # (1)
  message = function(cnd) message("b"),
  withCallingHandlers(  # (2)
    message = function(cnd) message("a"),
    message("c")
  )
)

#8.4.4. Read the source code for catch_cnd() and explain how it works. At the time Advanced R was written, the source for catch_cnd() was a little simpler:
catch_cnd <- function(expr) {
  tryCatch(
    condition = function(cnd) cnd,
    {
      force(expr)
      return(NULL)
```


```{r}
}
  )
}

#8.4.5. How could you rewrite show_condition() to use a single handler?
rlang::catch_cnd()

# What is the difference between rlang::catch_cnd() and rlang::catch_cnd?


```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
